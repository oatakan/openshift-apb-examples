FROM ansibleplaybookbundle/apb-base

LABEL "com.redhat.apb.version"="0.1.0"
LABEL "com.redhat.apb.spec"=\
"bmFtZTogbmV4dGNsb3VkLW15c3FsLWFwYgppbWFnZTogYW5zaWJsZXBsYXlib29rYnVuZGxlL25l\
eHRjbG91ZC1teXNxbC1hcGIKZGVzY3JpcHRpb246IFRoaXMgaXMgYW4gYXBiIHRoYXQgd2lsbCBk\
ZXBsb3kgbmV4dGNsb3VkCmRlcGVuZGVuY2llczogWydkb2NrZXIuaW8vbXlzcWw6bGF0ZXN0Jywg\
J2RvY2tlci5pby93b25kZXJmYWxsL25leHRjbG91ZDpsYXRlc3QnXQpiaW5kYWJsZTogRmFsc2UK\
YXN5bmM6IG9wdGlvbmFsCm1ldGFkYXRhOgogIGRpc3BsYXlOYW1lOiBuZXh0Y2xvdWQKcGxhbnM6\
CiAgLSBuYW1lOiBkZWZhdWx0CiAgICBkZXNjcmlwdGlvbjogVGhpcyBkZWZhdWx0IHBsYW4gZGVw\
bG95cyBuZXh0Y2xvdWQtYXBiCiAgICBmcmVlOiBUcnVlCiAgICBtZXRhZGF0YToge30KICAgIHBh\
cmFtZXRlcnM6CiAgICAtIG5hbWU6IG15c3FsX25hbWUKICAgICAgcmVxdWlyZWQ6IHRydWUKICAg\
ICAgZGVmYXVsdDogbmV4dGNsb3VkCiAgICAgIHR5cGU6IHN0cmluZwogICAgICB0aXRsZTogTXlT\
UUwgRGF0YWJhc2UgTmFtZQogICAgLSBuYW1lOiBteXNxbF91c2VyCiAgICAgIHJlcXVpcmVkOiB0\
cnVlCiAgICAgIGRlZmF1bHQ6IG5leHRjbG91ZAogICAgICB0aXRsZTogTXlTUUwgVXNlcgogICAg\
ICB0eXBlOiBzdHJpbmcKICAgICAgbWF4bGVuZ3RoOiA2MwogICAgLSBuYW1lOiBteXNxbF9wYXNz\
d29yZAogICAgICBkZWZhdWx0OiBhZG1pbgogICAgICB0eXBlOiBzdHJpbmcKICAgICAgZGVzY3Jp\
cHRpb246IEEgcmFuZG9tIGFscGhhbnVtZXJpYyBzdHJpbmcgaWYgbGVmdCBibGFuawogICAgICB0\
aXRsZTogTXlTUUwgUGFzc3dvcmQKICAgIC0gbmFtZTogbXlzcWxfcm9vdF9wYXNzd29yZAogICAg\
ICBkZWZhdWx0OiBhZG1pbgogICAgICB0eXBlOiBzdHJpbmcKICAgICAgZGVzY3JpcHRpb246IHJv\
b3QgcGFzc3dvcmQgZm9yIG15c3FsCiAgICAgIHRpdGxlOiBSb290IFBhc3N3b3JkCiAgICAtIG5h\
bWU6IG5leHRjbG91ZF92ZXJzaW9uCiAgICAgIGRlZmF1bHQ6IGxhdGVzdAogICAgICBlbnVtOiBb\
J2xhdGVzdCcsICcxMiddCiAgICAgIHR5cGU6IGVudW0KICAgICAgdGl0bGU6IE5leHRjbG91ZCBW\
ZXJzaW9uCiAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICAtIG5hbWU6IG15c3FsX3ZlcnNpb24KICAg\
ICAgZGVmYXVsdDogbGF0ZXN0CiAgICAgIGVudW06IFsnbGF0ZXN0J10KICAgICAgdHlwZTogZW51\
bQogICAgICB0aXRsZTogTXlTUUwgVmVyc2lvbgogICAgICByZXF1aXJlZDogdHJ1ZQogICAgLSBu\
YW1lOiBhZG1pbl91c2VyCiAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICAgIGRlZmF1bHQ6IG5leHRj\
bG91ZAogICAgICB0aXRsZTogQWRtaW4gVXNlcgogICAgICB0eXBlOiBzdHJpbmcKICAgICAgbWF4\
bGVuZ3RoOiA2MwogICAgLSBuYW1lOiBhZG1pbl9wYXNzd29yZAogICAgICBkZWZhdWx0OiBhZG1p\
bgogICAgICB0eXBlOiBzdHJpbmcKICAgICAgZGVzY3JpcHRpb246IEVudGVyIHNvbWUgc3Ryb25n\
IGFkbWluIHBhc3N3b3JkIGhlcmUKICAgICAgdGl0bGU6IEFkbWluIHBhc3N3b3JkCiAgICAgIHJl\
cXVpcmVkOiB0cnVlCiAgICAtIG5hbWU6IGRvbWFpbgogICAgICByZXF1aXJlZDogdHJ1ZQogICAg\
ICBkZWZhdWx0OiBuZXh0Y2xvdWQKICAgICAgdGl0bGU6IERvbWFpbgogICAgICB0eXBlOiBzdHJp\
bmcKICAgIC0gbmFtZTogZGJfdHlwZQogICAgICBkZWZhdWx0OiBteXNxbAogICAgICBlbnVtOiBb\
J215c3FsJywgJ3NxbGl0ZTMnLCAncGdzcWwnXQogICAgICB0eXBlOiBlbnVtCiAgICAgIHRpdGxl\
OiBEQiBUeXBlCiAgICAgIHJlcXVpcmVkOiB0cnVl"

COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles
RUN chmod -R g=u /opt/{ansible,apb}
USER apb
